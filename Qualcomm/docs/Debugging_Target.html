<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<style type="text/css">
table {
   border-collapse: collapse;
   border-width: 1px;
   border-spacing: 1px;
   border-color: transparent;
   margin: 16px 0;
   width: 100%;
}
th {
   background-color: #bbb; color: white;
}
td, th {
   border-style: solid;
   border-color: black;
   border-width: 1px;
   padding: 0 6px;
}
td p:first-child, th p:first-child {
   margin-top: 3px;
}
td p:last-child, th p:last-child {
   margin-bottom: 3px;
}

.smarkdoc {
  margin-left: 42px; margin-right: 42px;
  font-size: 13px;
  font-family: 'Lucida Grande', Geneva, Helvetica, Arial, sans-serif;
}

h1, h2, h3 { color: #3c4c6c; }
h1 {
  text-align: center;
  font-size: 200%;
/*    margin-left: -30px; */
  clear: both;
}
h2 {
  font-size: 160%;
  margin: 32px -40px 24px -42px;
  padding: 3px 24px 8px;
  border-bottom: 2px solid #5088c5;
  clear: both;
}
h3 {
  font-size: 130%;
  margin: 20px -4px 10px;
  padding: 4px;
  clear: both;
}
h4 {
  font-size: 110%;
  margin: 2em 0 1em;
}

pre {
  font-size: 90%;
  background-color: #f0f0f4; padding: 6px; border: 1px solid #d0d0ee;
  font-family: "Courier New", "Lucida Console", "Monaco", monospace;
}

.pre {
  font-size: 90%;
  padding: 6px;
  background-color: #f0f0f4;
  font-family: "Courier New", "Lucida Console", "Monaco", monospace;
}

code {
  font-size: 90%;
  font-family: "Courier New", "Lucida Console", "Monaco", monospace;
}

h3 code {
  font-size: 100%;
}

p {
  margin: 0.8em 0;
}
ul, ol {
  margin: 1em 0 1em 3em; padding: 0;
}
div.indent {
  margin: 0 3em;
}

a[href] {
  text-decoration: none;
  color: #2020b0;
}
a[href]:hover {
  border-bottom: 1px dotted #2030d0;
}

/* Smark Users Guide */

.codebox {
  padding: 0 1px;  margin-right:1px;
  border:1px solid #d0d0ee;
  background-color: #f0f0f4;
  font-weight: bold;
  font-family: "Courier New", "Lucida Console", "Monaco", monospace;
}

/* ================ Smark-specific classes ================ */

.indent {
  margin: 0 3em;
}

/*
|| Floats affect text flow but not block boundaries, so graphics in a DIV
|| would overlap floats if not for "clear: both"
*/
.diagram {
  margin: 18px 0;
  clear: both;
}

/* ASCII Art */

.art {
  margin-right: auto; margin-left: auto; /* center */
  font-family: Arial, Verdana, "Lucida Console", Monaco, monospace;
  font-weight: bold;
}
.art * {
   border-color: #543;
}
.art .dline, .art .drect {
   border-style: dotted;
}
.art .rect {
   -webkit-box-shadow: 0.2em 0.2em 0.3em rgba(0,0,0,0.3);
   -moz-box-shadow: 0.2em 0.2em 0.3em rgba(0,0,0,0.3);
   box-shadow: 0.2em 0.2em 0.2em #875;
   background-color: #f9faf4; /* #fafff4; #f8f8ec;  */
}
.art .nofx {
   background-color: #f9faf4;
}
.art .round {
   border-radius: 0.6em;
   -webkit-border-radius: 0.6em;
   -moz-border-radius: 0.6em;
}

/* .art .line {  -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.3); } */

/* Sequence Charts */

.msc {
   font: 11px Verdana, Monaco, "Lucida Console";
   margin-left: auto; margin-right: auto;
   background-color: white;
   /* border: 1px solid #555; */  /* Useful for non-white pages */
}

/* Table of Contents */

.tocLevel {
  margin-left: 2em;
  font-weight: normal;
}
.tocLevel .tocLevel {
  font-size: 90%; /* ...of inherited font size */
  line-height: 150%; /* ...of font size */
}
.toc > .tocLevel {
  font-weight: bold;
  margin: 0.5em 0
}
.toc {
  column-count: 2; column-gap: 2em;
  -moz-column-count: 2; -moz-column-gap: 2em;
  -webkit-column-count: 2; -webkit-column-gap: 2em;
}

/* ordinary text content is in P elements */

td p:first-child, th p:first-child {
   margin-top: 3px;
}
td p:last-child, th p:last-child {
   margin-bottom: 3px;
}
li p:only-child {
  margin-top: 0;
  margin-bottom: 0;
}

/* ================ Print ================ */

@media print {

  @page {
    margin: 0.75in 0.75in;
    size: Letter;
    @bottom {
      content: counter(page);
      vertical-align: top;
      padding-top: 1em;
    }
  }
  h1 { text-align: center;
       margin: 3in 0 20px; }
  h2 { page-break-before: always; }
  h2 { string-set: section content() }
  .toc { margin: 3em -2em }
  .toc a::after {
     font-size: 10px;
     content: leader(' . ') "  " target-counter(attr(href), page);
  }
  table { page-break-inside: avoid; }
}

/* ================  Layout  ================ */
/*
 *  +------------------------+
 *  |         #header        |
 *  +----------+-------------+
 *  | #sidebar |  #content   |
 *  |          |             |
 *  +----------+-------------+
 *
 * CSS padding, border width, and border style (!) affect the actual height
 * (and in turn layout).
 */

#header {
  position: fixed;
  top: 0px;
  height: 32px;
  left: 0px;
  width: 100%;
  padding: 10px 10px 0 0;
}
#sidebar {
  position: fixed;
  top: 42px;
  bottom: 0px;
  left: 0px;
  min-width: 180px;
  overflow: auto;
  border: 1px solid transparent;
  border-width: 0 1px 0 1px;
  padding: 0px 5px 0px 5px;
}
#content {
  position: fixed;
  top: 60px;
  left: 200px;
  bottom: 0px;
  right: 0px;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  padding: 10px 20px;
  padding-top: 0;
}

/* ================  Styles  ================ */


body {
  font-family: "Lucida Grande", Helvetica, Arial, sans-serif;
  font-size: 16px;
}

#header {
  color: #fff;
  background: #555;
  text-align: center;
  font-size: 25px;
}

#sidebar {
  color: #000;
  background: #eee;
  border-right: 1px solid #bbb;
  text-align: left;
  font-size: 12px;
  line-height: 50%;
}

#sidebar h1 {
  margin: 0 0 0 0;
  border-left: 5px solid transparent;
  text-align: left;
  font-size: 12px;
  /*text-shadow: #fff 1px 0px;*/
  line-height: 1%;
}

#sidebar h2 {
  margin: 2px 0 8px 0;
  border-left: 5px solid transparent;
  text-align: center;
  font-size: 12px;
  /*text-shadow: #fff 1px 0px;*/
  line-height: 1%;
}



#content {
  margin: 0;
  font-size: 13px;
  line-height: 160%;
}

#content h1, #content h2 {
  border-bottom: 2px solid;
  font-size: 1.8em;
  font-weight: normal;
  margin: 2.0em 0px 1.3em 0px;
  padding-bottom: 0.6em;
  text-align: left;
}

#content h3 {
  color: #242220;
  font-size: 1.4em;
  font-weight: normal;
  margin: 2em 0px 0.8em 0px;
  text-shadow: #FFFFFF 0px 1px 1px;
}
#content h4 {
  font-size: 1.2em;
  font-weight: normal;
  margin: 2em 0px 0.5em 0px;
  text-shadow: #FFFFFF 0px 1px 1px;
}

a[href] {
  color: #05c;
  text-decoration: none;
}

#sidebar a {
  /*text-shadow:  1px 1px 2px #fff, -1px -1px #ddd;*/
  line-height: 40%;
}

pre, code {
  font-family: "Courier New", "Lucida Console", "Monaco", monospace;
  font-family: "Monaco", monospace;  font-size: 90%;
  background-color: #f8f8fa;
  border: 1px solid #e4e4ee;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  padding: 1px 0 0 1px;
}

pre {
  padding: 2px 4px;
}

table {
   border-collapse: collapse;
   border-width: 1px;
   border-spacing: 1px;
   border-color: transparent;
   margin: 16px 0;
   width: 100%;
}
th {
   background-color: #bbb; color: white;
}
td, th {
   border-style: solid;
   border-color: black;
   border-width: 1px;
   padding: 0 6px;
}

/* Highlight currently-selected sidebar link */

#sidebar a.thisfile {
  color: #557;
}

/* indentation */

#content {
   padding-left: 60px;
}
#content h1, 
#content h2, 
#content h3, h4 {
    margin-left: -30px;
}

h3 > code {
    font-size: 80%;
}

/* ================ Smark-specific classes ================ */

.indent {
  margin: 0 3em;
}

/*
|| Floats affect text flow but not block boundaries, so graphics in a DIV 
|| would overlap floats if not for "clear: both"
*/
.diagram {
  margin: 18px 0;
  clear: both;
}

/* ASCII Art */

.art {
  margin-right: auto; margin-left: auto; /* center */
  font-family: Arial, Verdana, "Lucida Console", Monaco, monospace;
  font-weight: bold;
}
.art * {
   border-color: #543;
}
.art .dline, .art .drect {
   border-style: dotted;
}
.art .rect {
   -webkit-box-shadow: 0.2em 0.2em 0.3em rgba(0,0,0,0.3);
   -moz-box-shadow: 0.2em 0.2em 0.3em rgba(0,0,0,0.3);
   box-shadow: 0.2em 0.2em 0.2em #875;
   background-color: #f9faf4; /* #fafff4; #f8f8ec;  */
}
.art .nofx {
   background-color: #f9faf4;
}
.art .round {
   border-radius: 0.6em;
   -webkit-border-radius: 0.6em;
   -moz-border-radius: 0.6em;
}

/* Sequence Charts */

.msc {
   font: 11px Verdana, Monaco, "Lucida Console"; 
   margin-left: auto; margin-right: auto;
   background-color: white;
   border: 1px solid #555;
}

/* Table of Contents */

.tocLevel {
  margin-left: 2em;
  font-weight: normal;
}
.tocLevel .tocLevel {
  font-size: 90%; /* ...of inherited font size */
  line-height: 150%; /* ...of font size */
}
/*
.toc > .tocLevel {
  font-weight: bold;
  margin: 0.5em 0
}
*/

.toc {
  column-count: 1; column-gap: 2em;
  -moz-column-count: 1; -moz-column-gap: 2em;
  -webkit-column-count: 1; -webkit-column-gap: 2em; 
   alternate: column-width: 235px; column-rule-width: 5px;
}


.columns {
  column-count: 2; column-gap: 2em;
  -moz-column-count: 2; -moz-column-gap: 2em;
  -webkit-column-count: 2; -webkit-column-gap: 2em; p
}

/* ordinary text content is in P elements */

td p:first-child, th p:first-child {
   margin-top: 3px;
}
td p:last-child, th p:last-child {
   margin-bottom: 3px;
}
li p:only-child {
  margin-top: 0;
  margin-bottom: 0;
}


/* ================ Print ================ */

@media print {

  #header, #content { position: static; }
  #sidebar { display: none; }

  @page {
    margin: 0.75in 0.75in;
    size: Letter;
    @bottom {
      content: counter(page);
      vertical-align: top;
      padding-top: 1em;
    }
  }
  h1 { text-align: center;
       margin: 1in 0 1in; }
  h2 { page-break-before: always; }
  h2 { string-set: section content() }
  .toc { margin: 3em 0 }
  .toc a::after {
     font-size: 10px;
     content: leader(' . ') "  " target-counter(attr(href), page);
  }
  table { page-break-inside: avoid; }
}


</style><style type="text/css">
.search { right: 20pt; position: fixed; top: 5pt }

</style><style type="text/css">
.html2d { position: relative; }
.html2d div { position: absolute; border-width: 0; border-style: solid; }
.html2d div div { position: absolute; border-width: 0; border-style: solid; }

</style><title>Remote Debugger User Guide</title>
</head><body>
<div class="smarkdoc"><div id="header">Hexagon SDK 3.4.3</div><div id="sidebar"><top><img src="images/sidebar_top.jpg"></top><script src="scripts/post.js" type="text/javascript"></script><form class="search" id="searchForm"><input id="searchquery" name="q" onkeydown="postFunctionKeydown(event, false)"><input id="searchButton" onclick="postFunction(false)" type="button" value="Search"></form><p>
<a href="index.html">Quick start</a>
</p><hr>
<p>
<a href="feature_matrix.html">Feature Matrix</a>
</p><hr>
<p>
<a href="hexagon_architecture.html">Hexagon Architecture</a>
</p><hr>
<p>
<a href="images/Hexagon_Document_Bundle.pdf#page=2881">Hexagon Compiler/Linker</a>
</p><hr>
<p>
<a href="hexagon_libraries.html">Hexagon Standard Libraries</a>
</p><hr>
<p>
<a href="images/80-VB419-178_QuRT_User_Guide.pdf">Hexagon RTOS</a>
</p><hr>
<p>
<a href="images/80-VB419-108_Hexagon_DSP_User_Guide.pdf">Hexagon DSP Programming</a>
</p><hr>
<h3>
<a name="Platforms"></a>Platforms
</h3><p>
<a href="Platforms_HLOS.html">HLOS</a>
</p><p>
<a href="Platforms_Simulator.html">Simulator</a>
</p><p>
<a href="Platforms_Target.html">Target</a>
</p><hr>
<h3>
<a name="Environments"></a>Environments
</h3><p>
<a href="Environments_Build%20System.html">Build System</a>
</p><p>
<a href="Environments_Build%20System%20Porting.html">Build System Porting</a>
</p><p>
<a href="Environments_Hexagon%20IDE.html">Hexagon IDE</a>
</p><hr>
<h3>
<a name="ArchitectureOverview"></a>ArchitectureOverview
</h3><p>
<a href="HVX/ArchitectureOverview.html">HVX</a>
</p><hr>
<h3>
<a name="Applications"></a>Applications
</h3><p>
<a href="Audio/Applications.html">Audio</a>
</p><p>
<a href="Camera%20streaming/Applications.html">Camera streaming</a>
</p><p>
<a href="Applications_Compute%20offload.html">Compute offload</a>
</p><p>
<a href="FastCV/Applications_Computer%20Vision.html">Computer Vision</a>
</p><p>
<a href="Neural%20Networks/Applications.html">Neural Networks</a>
</p><p>
<a href="Voice/Applications.html">Voice</a>
</p><hr>
<h3>
<a name="APIs"></a>APIs
</h3><p>
<a href="APIs_Async%20Message%20Queue.html">Async Message Queue</a>
</p><p>
<a href="APIs_DSP%20Clk%20&amp;%20Rsrc%20Mgmt.html">DSP Clk &amp; Rsrc Mgmt</a>
</p><p>
<a href="APIs_Dynamic%20Loading.html">Dynamic Loading</a>
</p><p>
<a href="APIs_FastRPC.html">FastRPC</a>
</p><hr>
<h3>
<a name="Examples"></a>Examples
</h3><p>
<a href="Audio/Examples.html">Audio</a>
</p><p>
<a href="Camera%20streaming/Examples.html">Camera streaming</a>
</p><p>
<a href="Examples_Common.html">Common</a>
</p><p>
<a href="Examples_ComputeHVX.html">ComputeHVX</a>
</p><p>
<a href="Examples_GeneralOverview.html">GeneralOverview</a>
</p><p>
<a href="Neural%20Networks/Examples.html">Neural Networks</a>
</p><hr>
<h3>
<a name="Testing"></a>Testing
</h3><p>
<a href="CAPIv2/Testing_CAPIv2%20Unit%20Tests.html">CAPIv2 Unit Tests</a>
</p><p>
<a href="Testing_Eclipse%20Unit%20Tests.html">Eclipse Unit Tests</a>
</p><hr>
<h3>
<a name="Debugging"></a>Debugging
</h3><p>
<a href="Debugging_Connect%20to%20Device.html">Connect to Device</a>
</p><p>
<a href="Debugging_Exceptions.html">Exceptions</a>
</p><p>
<a href="Debugging_Message%20Logging.html">Message Logging</a>
</p><p>
<a href="Debugging_Simulator.html">Simulator</a>
</p><p>
<a href="Debugging_Target.html">Target</a>
</p><hr>
<h3>
<a name="Tools"></a>Tools
</h3><p>
<a href="Tools_Hexagon%20Tools%208.3.html">Hexagon Tools 8.3</a>
</p><p>
<a href="Tools_IDL%20Compiler.html">IDL Compiler</a>
</p><p>
<a href="Tools_On%20Target%20Profiling.html">On Target Profiling</a>
</p><p>
<a href="Tools_Scripts.html">Scripts</a>
</p><p>
<a href="Tools_Signing.html">Signing</a>
</p><p>
<a href="Tools_UserGuides.html">UserGuides</a>
</p><p>
<a href="Tools_Utilities.html">Utilities</a>
</p><hr>
<h3>
<a name="FAQ"></a>FAQ
</h3><p>
<a href="FAQ_Common.html">Common</a>
</p><p>
<a href="FAQ_Dynamic%20Loading.html">Dynamic Loading</a>
</p><p>
<a href="FAQ_FastRPC.html">FastRPC</a>
</p><p>
<a href="FAQ_Hexagon%20IDE.html">Hexagon IDE</a>
</p><hr>
<h3>
<a name="Dependencies"></a>Dependencies
</h3><p>
<a href="Dependencies_Common.html">Common</a>
</p><hr>
<h3>
<a name="Release%20Notes"></a>Release Notes
</h3><p>
<a href="Release%20Notes_Common.html">Common</a>
</p><hr>
<h3>
<a name="Support"></a>Support
</h3><p>
<a href="Support_Contact.html">Contact</a>
</p><center><img src="images/sidebar_bot.jpg"></center></div><div id="content"><a name="_top_" style="display:block;"></a><h1>
<a name="Remote%20Debugger%20User%20Guide"></a>Remote Debugger User Guide
</h1><div class="toc"><div class="tocLevel"><a href="#Overview">Overview</a></div><div class="tocLevel"><a href="#Overall%20flow">Overall flow</a></div><div class="tocLevel"><a href="#Verification%20of%20software%20requirements">Verification of software requirements</a></div><div class="tocLevel"><a href="#Software%20requirements">Software requirements</a></div><div class="tocLevel"><a href="#Supported%20targets">Supported targets</a></div><div class="tocLevel"><a href="#Known%20issues">Known issues</a></div><div class="tocLevel"><a href="#Debugging%20procedure">Debugging procedure</a></div><div class="tocLevel"><a href="#References">References</a></div></div><h2>
<a name="Overview"></a>Overview
</h2><p>
The goal of this debug feature is to provide a reliable, responsive, accurate, and secure debug capability to developers interested in debugging a subsystem processor image without the use of a hardware debugger.
</p><p>
The Debug Agent along with the Remote Debug Driver implements a shared memory based transport mechanism that allows for a debugger (ex. LLDB) running on a host PC to communicate with a remote stub running on peripheral subsystems such as the aDSP, cDSP etc.
</p><p>
The diagram below depicts, end to end, the components involved to support remote debugging:
</p><div class=diagram>
<div class="html2d art" style="width:544px;height:256px;line-height:16px;font-size:12.48px;white-space:nowrap">
<div class="rect round" style="border-width:3px;left:411px;top:151px;right:58px;bottom:38px"></div>
<div class="rect round" style="border-width:3px;left:411px;top:55px;right:58px;bottom:134px"></div>
<div class="rect round" style="border-width:3px;left:243px;top:103px;right:226px;bottom:86px"></div>
<div class="rect round" style="border-width:3px;left:139px;top:39px;right:338px;bottom:86px"></div>
<div class="rect round" style="border-width:3px;left:3px;top:39px;right:466px;bottom:150px"></div>
<div style="border-right-width: 10.5px;border-bottom: 4px solid transparent;border-top: 4px solid transparent;left:80px;top:68px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:83px;top:71px;right:439px;bottom:183px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-bottom: 4px solid transparent;border-top: 4px solid transparent;left:125.5px;top:68px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:111px;top:71px;right:411px;bottom:183px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:247px;top:135px;right:231px;bottom:119px;line-height:0"></div>
<div style="border-right-width: 10.5px;border-bottom: 4px solid transparent;border-top: 4px solid transparent;left:208px;top:132px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-bottom: 4px solid transparent;border-top: 4px solid transparent;left:229.5px;top:132px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:211px;top:135px;right:307px;bottom:119px;line-height:0"></div>
<div style="border-right-width: 10.5px;border-bottom: 4px solid transparent;border-top: 4px solid transparent;left:320px;top:148px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-bottom: 4px solid transparent;border-top: 4px solid transparent;left:397.5px;top:180px;line-height:0"></div>
<div class=line style="border-right-width:2px;border-top-width:2px;left:323px;top:151px;right:187px;bottom:71px"></div>
<div class=line style="border-top-width:2px;left:355px;top:183px;right:139px;bottom:71px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:143px;top:103px;right:343px;bottom:151px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-bottom: 4px solid transparent;border-top: 4px solid transparent;left:397.5px;top:84px;line-height:0"></div>
<div style="border-right-width: 10.5px;border-bottom: 4px solid transparent;border-top: 4px solid transparent;left:320px;top:116px;line-height:0"></div>
<div class=line style="border-left-width:2px;border-top-width:2px;left:355px;top:87px;right:139px;bottom:135px"></div>
<div class=line style="border-top-width:2px;left:323px;top:119px;right:187px;bottom:135px;line-height:0"></div>
<div class=dline style="border-left-width:2px;left:107px;top:-1px;right:435px;bottom:-1px"></div>
<div style="text-align:center;left:16px;top:16px;right:456px;bottom:224px">HOST (PC)</div>
<div style="text-align:center;left:128px;top:16px;right:368px;bottom:224px">Device</div>
<div style="text-align:center;left:152px;top:48px;right:352px;bottom:192px">Debug</div>
<div style="text-align:center;left:8px;top:64px;right:472px;bottom:176px">Debugger</div>
<div style="text-align:center;left:152px;top:64px;right:352px;bottom:176px">Agent</div>
<div style="text-align:center;left:424px;top:64px;right:72px;bottom:176px">Remote</div>
<div style="text-align:center;left:160px;top:80px;right:360px;bottom:160px">App</div>
<div style="text-align:center;left:428px;top:80px;right:76px;bottom:160px">Debug</div>
<div style="left:424px;top:96px;right:88px;bottom:144px">Stub</div>
<div style="text-align:center;left:148px;top:112px;right:348px;bottom:128px">Remote</div>
<div style="text-align:center;left:152px;top:128px;right:352px;bottom:112px">Debug</div>
<div style="text-align:center;left:148px;top:144px;right:348px;bottom:96px">Driver</div>
<div style="text-align:center;left:424px;top:160px;right:72px;bottom:80px">Remote</div>
<div style="text-align:center;left:128px;top:176px;right:328px;bottom:64px">Application</div>
<div style="left:256px;top:176px;right:240px;bottom:64px">Shared</div>
<div style="text-align:center;left:428px;top:176px;right:76px;bottom:64px">Debug</div>
<div style="left:136px;top:192px;right:336px;bottom:48px">Processor</div>
<div style="left:256px;top:192px;right:240px;bottom:48px">Memory</div>
<div style="left:424px;top:192px;right:88px;bottom:48px">Stub</div>
<div style="left:136px;top:208px;right:336px;bottom:32px">(Android)</div>
<div style="text-align:center;left:376px;top:224px;right:0px;bottom:16px">Peripheral Subsystems</div>
<div style="text-align:center;left:384px;top:240px;right:24px;bottom:0px">(aDSP, cDSP, ...)</div>
</div>
</div>
<p>
Debugger: Debugger application (LLDB) running on the host PC that communicates with the remote stub.
</p><p>
Debug Agent: Software that runs on the Android platform that provides connectivity from the device to the host PC.
</p><p>
Remote Debug Driver: A character based driver that the Debug Agent uses to transport the payload received from the host to the debug stub running on the subsystem processor over shared memory and vice versa.
</p><p>
Shared Memory: Shared memory from the SMEM pool that is accessible from the Applications Processor (AP) and the subsystem processors.
</p><p>
Remote Debug Stub: Privileged code that runs in the kernels of the subsystem processors that receives debug commands from the debugger running on the host and acts on these commands. These commands include reading and writing to registers and memory belonging to the subsystem's address space, setting breakpoints, single stepping etc.
</p><h2>
<a name="Overall%20flow"></a>Overall flow
</h2><p>
Here is the overall flow:
</p><ul type="circle">
<li>
<p>
When the Debug Agent application starts up, it opens up a shared memory based transport channel to the DSP that will be debugged (aDSP, cDSP, etc...)
</p>
</li><li>
<p>
The Debug Agent application communicates with the DSP to discover the running processes and exposes a port for each one.
</p>
</li><li>
<p>
LLDB on the host machine connects to the port associated with the DSP process that the user wishes to debug
</p>
</li><li>
<p>
LLDB then communicates via this port to debug the process on the DSP. This includes setting breakpoints, reading registers, querying threads, etc...
</p>
</li><li>
<p>
When the process hits a breakpoint it will be halted and control turned over the LLDB. LLDB then provides the user the ability to single step, continue, etc...
</p>
</li>
</ul><h2>
<a name="Verification%20of%20software%20requirements"></a>Verification of software requirements
</h2><p>
A verification script is provided in the SDK to check if the debugger is setup correctly. Please go to <a href="debugger_verification_script_user_guide.html">Verification Script</a> to see how to use the script and verify the software on the device is functioning correctly.
</p><h2>
<a name="Software%20requirements"></a>Software requirements
</h2><ul type="circle">
<li>
<p>
<a href="Debugging_Connect%20to%20Device.html">Ability to communicate with the device</a>
</p>
</li><li>
<p>
hexagon-lldb.exe from hexagon tools. This can be found under '&lt;HEXAGON_SDK_ROOT&gt;/tools/HEXAGON_Tools'
</p>
</li><li>
<p>
Debug agent user mode Android app. It is present on the target at /system/bin/ location. If your target did not include the remote debug agent the scripts will push it for you from the SDK (&lt;HEXAGON_SDK_ROOT&gt;/tools/debug/remote_debug_agent/android).
</p>
</li><li>
<p>
Linux Android build that has the driver (rdbg.ko). To check whether this are part of the image that has been flashed, connect the device to the host machine using a USB cable and do the following in a windows command prompt:
</p><pre>adb root
adb shell
ls /system/lib/modules
</pre><p>
if rdbg.ko is not present in /system/lib/modules, please check /vendor/lib/modules
</p><pre>ls /vendor/lib/modules 
</pre><p>
rdbg.ko should be present in either /system/lib/modules or /vendor/lib/modules. If rdbg.ko is not present then remote debugger is not supported. Please use a build that has rdbg.ko.
</p>
</li>
</ul><h2>
<a name="Supported%20targets"></a>Supported targets
</h2><ul type="circle">
<li>
<p>
8998
</p>
</li><li>
<p>
sdm660 CDSP
</p>
</li><li>
<p>
sdm670 CDSP
</p>
</li><li>
<p>
sdm845 ADSP and CDSP
</p>
</li><li>
<p>
SM8150 ADSP and CDSP
</p>
</li>
</ul><h2>
<a name="Known%20issues"></a>Known issues
</h2><p>
<b>Important please read:</b>
</p><ul type="circle">
<li>
<p>
Debugging User PD Exceptions are only supported on SDM845 and newer devices. This means on older devices the user process will exit and the debug session will end. To try and avoid this you can set a breakpoint before the place in your code where you think the exception is occurring. On SDM845 a breakpoint will be placed in the fastrpc user process exception handler. On SM8150 the breakpoint will be placed at the point of exception (your code).
</p>
</li><li>
<p>
Device needs to be rebooted between debug sessions. After completing a debug session LLDB will not be able to re-connect and any attempt to do so will result in unpredictable behavior.
</p>
</li><li>
<p>
If you try and force exit that application you are debugging (Ctl-c) you will likely crash the device and at least will have unpredictable behavior. If you need to start over or run a program you don't which to debug you will have to reboot the device.
</p>
</li><li>
<p>
Stdout is getting buffered with adb versions 1.0.36 and newer when an application (like calculator) has started and is waiting for debugger to connect. This may be fixed in a future adb release, but for now users can try any one of the following work-around.
</p><ul class="indent" type="circle">
<li>
<p>
Use <b>setbuf(stdout,NULL)</b> in the main() of application to disable buffering on stdout
</p>
</li><li>
<p>
Run the application from the shell . adb shell . :/ # ./data/calculator 0 1000
</p>
</li>
</ul>
</li>
</ul><h2>
<a name="Debugging%20procedure"></a>Debugging procedure
</h2><p>
There are two ways to do on-target debugging:
</p><ul type="circle">
<li>
<p>
<a href="debugger_cmdline_guide.html">Command line</a>
</p>
</li><li>
<p>
<a href="eclipse_target_debug.html">Eclipse IDE</a>
</p>
</li>
</ul><h2>
<a name="References"></a>References
</h2><ul type="circle">
<li>
<p>
<a href="file:images/Hexagon_Document_Bundle.pdf#page=6000">Hexagon LLDB Debugger</a>
</p>
</li><li>
<p>
<a href="file:images/Hexagon_Document_Bundle.pdf#page=141">Hexagon exception handling</a>
</p>
</li><li>
<p>
<a href="https://lldb.llvm.org/lldb-gdb.html">LLDB commands</a>
</p>
</li>
</ul><p align="center" style="display:block;padding-top: 50px;">
  Copyright &#169; 2018 Qualcomm Technologies Inc. All rights reserved.

</p><a style="display:block;padding-bottom: 700px;"></a></div></div>
</body>
</html>
