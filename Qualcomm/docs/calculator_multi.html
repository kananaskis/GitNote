<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<style type="text/css">
table {
   border-collapse: collapse;
   border-width: 1px;
   border-spacing: 1px;
   border-color: transparent;
   margin: 16px 0;
   width: 100%;
}
th {
   background-color: #bbb; color: white;
}
td, th {
   border-style: solid;
   border-color: black;
   border-width: 1px;
   padding: 0 6px;
}
td p:first-child, th p:first-child {
   margin-top: 3px;
}
td p:last-child, th p:last-child {
   margin-bottom: 3px;
}

.smarkdoc {
  margin-left: 42px; margin-right: 42px;
  font-size: 13px;
  font-family: 'Lucida Grande', Geneva, Helvetica, Arial, sans-serif;
}

h1, h2, h3 { color: #3c4c6c; }
h1 {
  text-align: center;
  font-size: 200%;
/*    margin-left: -30px; */
  clear: both;
}
h2 {
  font-size: 160%;
  margin: 32px -40px 24px -42px;
  padding: 3px 24px 8px;
  border-bottom: 2px solid #5088c5;
  clear: both;
}
h3 {
  font-size: 130%;
  margin: 20px -4px 10px;
  padding: 4px;
  clear: both;
}
h4 {
  font-size: 110%;
  margin: 2em 0 1em;
}

pre {
  font-size: 90%;
  background-color: #f0f0f4; padding: 6px; border: 1px solid #d0d0ee;
  font-family: "Courier New", "Lucida Console", "Monaco", monospace;
}

.pre {
  font-size: 90%;
  padding: 6px;
  background-color: #f0f0f4;
  font-family: "Courier New", "Lucida Console", "Monaco", monospace;
}

code {
  font-size: 90%;
  font-family: "Courier New", "Lucida Console", "Monaco", monospace;
}

h3 code {
  font-size: 100%;
}

p {
  margin: 0.8em 0;
}
ul, ol {
  margin: 1em 0 1em 3em; padding: 0;
}
div.indent {
  margin: 0 3em;
}

a[href] {
  text-decoration: none;
  color: #2020b0;
}
a[href]:hover {
  border-bottom: 1px dotted #2030d0;
}

/* Smark Users Guide */

.codebox {
  padding: 0 1px;  margin-right:1px;
  border:1px solid #d0d0ee;
  background-color: #f0f0f4;
  font-weight: bold;
  font-family: "Courier New", "Lucida Console", "Monaco", monospace;
}

/* ================ Smark-specific classes ================ */

.indent {
  margin: 0 3em;
}

/*
|| Floats affect text flow but not block boundaries, so graphics in a DIV
|| would overlap floats if not for "clear: both"
*/
.diagram {
  margin: 18px 0;
  clear: both;
}

/* ASCII Art */

.art {
  margin-right: auto; margin-left: auto; /* center */
  font-family: Arial, Verdana, "Lucida Console", Monaco, monospace;
  font-weight: bold;
}
.art * {
   border-color: #543;
}
.art .dline, .art .drect {
   border-style: dotted;
}
.art .rect {
   -webkit-box-shadow: 0.2em 0.2em 0.3em rgba(0,0,0,0.3);
   -moz-box-shadow: 0.2em 0.2em 0.3em rgba(0,0,0,0.3);
   box-shadow: 0.2em 0.2em 0.2em #875;
   background-color: #f9faf4; /* #fafff4; #f8f8ec;  */
}
.art .nofx {
   background-color: #f9faf4;
}
.art .round {
   border-radius: 0.6em;
   -webkit-border-radius: 0.6em;
   -moz-border-radius: 0.6em;
}

/* .art .line {  -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.3); } */

/* Sequence Charts */

.msc {
   font: 11px Verdana, Monaco, "Lucida Console";
   margin-left: auto; margin-right: auto;
   background-color: white;
   /* border: 1px solid #555; */  /* Useful for non-white pages */
}

/* Table of Contents */

.tocLevel {
  margin-left: 2em;
  font-weight: normal;
}
.tocLevel .tocLevel {
  font-size: 90%; /* ...of inherited font size */
  line-height: 150%; /* ...of font size */
}
.toc > .tocLevel {
  font-weight: bold;
  margin: 0.5em 0
}
.toc {
  column-count: 2; column-gap: 2em;
  -moz-column-count: 2; -moz-column-gap: 2em;
  -webkit-column-count: 2; -webkit-column-gap: 2em;
}

/* ordinary text content is in P elements */

td p:first-child, th p:first-child {
   margin-top: 3px;
}
td p:last-child, th p:last-child {
   margin-bottom: 3px;
}
li p:only-child {
  margin-top: 0;
  margin-bottom: 0;
}

/* ================ Print ================ */

@media print {

  @page {
    margin: 0.75in 0.75in;
    size: Letter;
    @bottom {
      content: counter(page);
      vertical-align: top;
      padding-top: 1em;
    }
  }
  h1 { text-align: center;
       margin: 3in 0 20px; }
  h2 { page-break-before: always; }
  h2 { string-set: section content() }
  .toc { margin: 3em -2em }
  .toc a::after {
     font-size: 10px;
     content: leader(' . ') "  " target-counter(attr(href), page);
  }
  table { page-break-inside: avoid; }
}

/* ================  Layout  ================ */
/*
 *  +------------------------+
 *  |         #header        |
 *  +----------+-------------+
 *  | #sidebar |  #content   |
 *  |          |             |
 *  +----------+-------------+
 *
 * CSS padding, border width, and border style (!) affect the actual height
 * (and in turn layout).
 */

#header {
  position: fixed;
  top: 0px;
  height: 32px;
  left: 0px;
  width: 100%;
  padding: 10px 10px 0 0;
}
#sidebar {
  position: fixed;
  top: 42px;
  bottom: 0px;
  left: 0px;
  min-width: 180px;
  overflow: auto;
  border: 1px solid transparent;
  border-width: 0 1px 0 1px;
  padding: 0px 5px 0px 5px;
}
#content {
  position: fixed;
  top: 60px;
  left: 200px;
  bottom: 0px;
  right: 0px;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  padding: 10px 20px;
  padding-top: 0;
}

/* ================  Styles  ================ */


body {
  font-family: "Lucida Grande", Helvetica, Arial, sans-serif;
  font-size: 16px;
}

#header {
  color: #fff;
  background: #555;
  text-align: center;
  font-size: 25px;
}

#sidebar {
  color: #000;
  background: #eee;
  border-right: 1px solid #bbb;
  text-align: left;
  font-size: 12px;
  line-height: 50%;
}

#sidebar h1 {
  margin: 0 0 0 0;
  border-left: 5px solid transparent;
  text-align: left;
  font-size: 12px;
  /*text-shadow: #fff 1px 0px;*/
  line-height: 1%;
}

#sidebar h2 {
  margin: 2px 0 8px 0;
  border-left: 5px solid transparent;
  text-align: center;
  font-size: 12px;
  /*text-shadow: #fff 1px 0px;*/
  line-height: 1%;
}



#content {
  margin: 0;
  font-size: 13px;
  line-height: 160%;
}

#content h1, #content h2 {
  border-bottom: 2px solid;
  font-size: 1.8em;
  font-weight: normal;
  margin: 2.0em 0px 1.3em 0px;
  padding-bottom: 0.6em;
  text-align: left;
}

#content h3 {
  color: #242220;
  font-size: 1.4em;
  font-weight: normal;
  margin: 2em 0px 0.8em 0px;
  text-shadow: #FFFFFF 0px 1px 1px;
}
#content h4 {
  font-size: 1.2em;
  font-weight: normal;
  margin: 2em 0px 0.5em 0px;
  text-shadow: #FFFFFF 0px 1px 1px;
}

a[href] {
  color: #05c;
  text-decoration: none;
}

#sidebar a {
  /*text-shadow:  1px 1px 2px #fff, -1px -1px #ddd;*/
  line-height: 40%;
}

pre, code {
  font-family: "Courier New", "Lucida Console", "Monaco", monospace;
  font-family: "Monaco", monospace;  font-size: 90%;
  background-color: #f8f8fa;
  border: 1px solid #e4e4ee;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  padding: 1px 0 0 1px;
}

pre {
  padding: 2px 4px;
}

table {
   border-collapse: collapse;
   border-width: 1px;
   border-spacing: 1px;
   border-color: transparent;
   margin: 16px 0;
   width: 100%;
}
th {
   background-color: #bbb; color: white;
}
td, th {
   border-style: solid;
   border-color: black;
   border-width: 1px;
   padding: 0 6px;
}

/* Highlight currently-selected sidebar link */

#sidebar a.thisfile {
  color: #557;
}

/* indentation */

#content {
   padding-left: 60px;
}
#content h1, 
#content h2, 
#content h3, h4 {
    margin-left: -30px;
}

h3 > code {
    font-size: 80%;
}

/* ================ Smark-specific classes ================ */

.indent {
  margin: 0 3em;
}

/*
|| Floats affect text flow but not block boundaries, so graphics in a DIV 
|| would overlap floats if not for "clear: both"
*/
.diagram {
  margin: 18px 0;
  clear: both;
}

/* ASCII Art */

.art {
  margin-right: auto; margin-left: auto; /* center */
  font-family: Arial, Verdana, "Lucida Console", Monaco, monospace;
  font-weight: bold;
}
.art * {
   border-color: #543;
}
.art .dline, .art .drect {
   border-style: dotted;
}
.art .rect {
   -webkit-box-shadow: 0.2em 0.2em 0.3em rgba(0,0,0,0.3);
   -moz-box-shadow: 0.2em 0.2em 0.3em rgba(0,0,0,0.3);
   box-shadow: 0.2em 0.2em 0.2em #875;
   background-color: #f9faf4; /* #fafff4; #f8f8ec;  */
}
.art .nofx {
   background-color: #f9faf4;
}
.art .round {
   border-radius: 0.6em;
   -webkit-border-radius: 0.6em;
   -moz-border-radius: 0.6em;
}

/* Sequence Charts */

.msc {
   font: 11px Verdana, Monaco, "Lucida Console"; 
   margin-left: auto; margin-right: auto;
   background-color: white;
   border: 1px solid #555;
}

/* Table of Contents */

.tocLevel {
  margin-left: 2em;
  font-weight: normal;
}
.tocLevel .tocLevel {
  font-size: 90%; /* ...of inherited font size */
  line-height: 150%; /* ...of font size */
}
/*
.toc > .tocLevel {
  font-weight: bold;
  margin: 0.5em 0
}
*/

.toc {
  column-count: 1; column-gap: 2em;
  -moz-column-count: 1; -moz-column-gap: 2em;
  -webkit-column-count: 1; -webkit-column-gap: 2em; 
   alternate: column-width: 235px; column-rule-width: 5px;
}


.columns {
  column-count: 2; column-gap: 2em;
  -moz-column-count: 2; -moz-column-gap: 2em;
  -webkit-column-count: 2; -webkit-column-gap: 2em; p
}

/* ordinary text content is in P elements */

td p:first-child, th p:first-child {
   margin-top: 3px;
}
td p:last-child, th p:last-child {
   margin-bottom: 3px;
}
li p:only-child {
  margin-top: 0;
  margin-bottom: 0;
}


/* ================ Print ================ */

@media print {

  #header, #content { position: static; }
  #sidebar { display: none; }

  @page {
    margin: 0.75in 0.75in;
    size: Letter;
    @bottom {
      content: counter(page);
      vertical-align: top;
      padding-top: 1em;
    }
  }
  h1 { text-align: center;
       margin: 1in 0 1in; }
  h2 { page-break-before: always; }
  h2 { string-set: section content() }
  .toc { margin: 3em 0 }
  .toc a::after {
     font-size: 10px;
     content: leader(' . ') "  " target-counter(attr(href), page);
  }
  table { page-break-inside: avoid; }
}


</style><style type="text/css">
.search { right: 20pt; position: fixed; top: 5pt }

</style><style type="text/css">
.html2d { position: relative; }
.html2d div { position: absolute; border-width: 0; border-style: solid; }
.html2d div div { position: absolute; border-width: 0; border-style: solid; }

</style><title>Calculator offloaded</title>
</head><body>
<div class="smarkdoc"><div id="header">Hexagon SDK 3.4.3</div><div id="sidebar"><top><img src="images/sidebar_top.jpg"></top><script src="scripts/post.js" type="text/javascript"></script><form class="search" id="searchForm"><input id="searchquery" name="q" onkeydown="postFunctionKeydown(event, false)"><input id="searchButton" onclick="postFunction(false)" type="button" value="Search"></form><p>
<a href="index.html">Quick start</a>
</p><hr>
<p>
<a href="feature_matrix.html">Feature Matrix</a>
</p><hr>
<p>
<a href="hexagon_architecture.html">Hexagon Architecture</a>
</p><hr>
<p>
<a href="images/Hexagon_Document_Bundle.pdf#page=2881">Hexagon Compiler/Linker</a>
</p><hr>
<p>
<a href="hexagon_libraries.html">Hexagon Standard Libraries</a>
</p><hr>
<p>
<a href="images/80-VB419-178_QuRT_User_Guide.pdf">Hexagon RTOS</a>
</p><hr>
<p>
<a href="images/80-VB419-108_Hexagon_DSP_User_Guide.pdf">Hexagon DSP Programming</a>
</p><hr>
<h3>
<a name="Platforms"></a>Platforms
</h3><p>
<a href="Platforms_HLOS.html">HLOS</a>
</p><p>
<a href="Platforms_Simulator.html">Simulator</a>
</p><p>
<a href="Platforms_Target.html">Target</a>
</p><hr>
<h3>
<a name="Environments"></a>Environments
</h3><p>
<a href="Environments_Build%20System.html">Build System</a>
</p><p>
<a href="Environments_Build%20System%20Porting.html">Build System Porting</a>
</p><p>
<a href="Environments_Hexagon%20IDE.html">Hexagon IDE</a>
</p><hr>
<h3>
<a name="ArchitectureOverview"></a>ArchitectureOverview
</h3><p>
<a href="HVX/ArchitectureOverview.html">HVX</a>
</p><hr>
<h3>
<a name="Applications"></a>Applications
</h3><p>
<a href="Audio/Applications.html">Audio</a>
</p><p>
<a href="Camera%20streaming/Applications.html">Camera streaming</a>
</p><p>
<a href="Applications_Compute%20offload.html">Compute offload</a>
</p><p>
<a href="FastCV/Applications_Computer%20Vision.html">Computer Vision</a>
</p><p>
<a href="Neural%20Networks/Applications.html">Neural Networks</a>
</p><p>
<a href="Voice/Applications.html">Voice</a>
</p><hr>
<h3>
<a name="APIs"></a>APIs
</h3><p>
<a href="APIs_Async%20Message%20Queue.html">Async Message Queue</a>
</p><p>
<a href="APIs_DSP%20Clk%20&amp;%20Rsrc%20Mgmt.html">DSP Clk &amp; Rsrc Mgmt</a>
</p><p>
<a href="APIs_Dynamic%20Loading.html">Dynamic Loading</a>
</p><p>
<a href="APIs_FastRPC.html">FastRPC</a>
</p><hr>
<h3>
<a name="Examples"></a>Examples
</h3><p>
<a href="Audio/Examples.html">Audio</a>
</p><p>
<a href="Camera%20streaming/Examples.html">Camera streaming</a>
</p><p>
<a href="Examples_Common.html">Common</a>
</p><p>
<a href="Examples_ComputeHVX.html">ComputeHVX</a>
</p><p>
<a href="Examples_GeneralOverview.html">GeneralOverview</a>
</p><p>
<a href="Neural%20Networks/Examples.html">Neural Networks</a>
</p><hr>
<h3>
<a name="Testing"></a>Testing
</h3><p>
<a href="CAPIv2/Testing_CAPIv2%20Unit%20Tests.html">CAPIv2 Unit Tests</a>
</p><p>
<a href="Testing_Eclipse%20Unit%20Tests.html">Eclipse Unit Tests</a>
</p><hr>
<h3>
<a name="Debugging"></a>Debugging
</h3><p>
<a href="Debugging_Connect%20to%20Device.html">Connect to Device</a>
</p><p>
<a href="Debugging_Exceptions.html">Exceptions</a>
</p><p>
<a href="Debugging_Message%20Logging.html">Message Logging</a>
</p><p>
<a href="Debugging_Simulator.html">Simulator</a>
</p><p>
<a href="Debugging_Target.html">Target</a>
</p><hr>
<h3>
<a name="Tools"></a>Tools
</h3><p>
<a href="Tools_Hexagon%20Tools%208.3.html">Hexagon Tools 8.3</a>
</p><p>
<a href="Tools_IDL%20Compiler.html">IDL Compiler</a>
</p><p>
<a href="Tools_On%20Target%20Profiling.html">On Target Profiling</a>
</p><p>
<a href="Tools_Scripts.html">Scripts</a>
</p><p>
<a href="Tools_Signing.html">Signing</a>
</p><p>
<a href="Tools_UserGuides.html">UserGuides</a>
</p><p>
<a href="Tools_Utilities.html">Utilities</a>
</p><hr>
<h3>
<a name="FAQ"></a>FAQ
</h3><p>
<a href="FAQ_Common.html">Common</a>
</p><p>
<a href="FAQ_Dynamic%20Loading.html">Dynamic Loading</a>
</p><p>
<a href="FAQ_FastRPC.html">FastRPC</a>
</p><p>
<a href="FAQ_Hexagon%20IDE.html">Hexagon IDE</a>
</p><hr>
<h3>
<a name="Dependencies"></a>Dependencies
</h3><p>
<a href="Dependencies_Common.html">Common</a>
</p><hr>
<h3>
<a name="Release%20Notes"></a>Release Notes
</h3><p>
<a href="Release%20Notes_Common.html">Common</a>
</p><hr>
<h3>
<a name="Support"></a>Support
</h3><p>
<a href="Support_Contact.html">Contact</a>
</p><center><img src="images/sidebar_bot.jpg"></center></div><div id="content"><a name="_top_" style="display:block;"></a><h1>
<a name="Calculator%20offloaded"></a>Calculator offloaded
</h1><div class="toc"><div class="tocLevel"><a href="#Overview">Overview</a></div><div class="tocLevel"><a href="#calculator_multi_legacy">calculator_multi_legacy</a></div><div class="tocLevel"><a href="#Calculator_multi_domains">Calculator_multi_domains</a></div><div class="tocLevel"><a href="#Building%20and%20Testing">Building and Testing</a></div></div><h2>
<a name="Overview"></a>Overview
</h2><p>
If a task needs to be oflloaded to a DSP, the user has the option to choose the DSP he wants the task to be executed in.
</p><p>
There are two mechanisms that is supported in our chipsets to do this.
</p><ul>
<li>
<p>
Legacy method &#8212; Link the application containing the stub definition with the respective libXdsprpc.so
</p>
</li><li>
<p>
Use Domains &#8212; Open remote session providing the DSP name you choose at run-time.
</p>
</li>
</ul><p>
We recommend all users to use Domains as explained in the second example above to offload their tasks.
</p><h2>
<a name="calculator_multi_legacy"></a>calculator_multi_legacy
</h2><p>
Example calculator_multi_legacy illustrates the first of these mechanisms.
</p><p>
Recollect the following picture from the <a href="APIs_FastRPC.html">FastRPC architecture</a>
</p><p>
The below diagram depicts invocation of a single method where the client and object reside on different processors.
</p><div class=diagram>
<div class="html2d art" style="width:600px;height:176px;font-size:12.48px;line-height:16px;white-space:nowrap">
<div class="rect round" style="border-width:3px;left:203px;top:7px;right:330px;bottom:70px"></div>
<div class="rect round" style="border-width:3px;left:539px;top:7px;right:2px;bottom:70px"></div>
<div class="rect round" style="border-width:3px;left:131px;top:7px;right:418px;bottom:70px"></div>
<div class="rect round" style="border-width:3px;left:427px;top:7px;right:130px;bottom:70px"></div>
<div class="rect round" style="border-width:3px;left:3px;top:7px;right:538px;bottom:70px"></div>
<div class="rect round" style="border-width:3px;left:323px;top:7px;right:194px;bottom:70px"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:189.5px;top:36px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:183px;top:39px;right:403px;bottom:135px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:309.5px;top:36px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:271px;top:39px;right:283px;bottom:135px;line-height:0"></div>
<div class=line style="border-width:2px;border-top-width:0;-webkit-border-bottom-right-radius:8px;-moz-border-radius-bottomright:8px;border-bottom-right-radius:8px;-webkit-border-bottom-left-radius:8px;-moz-border-radius-bottomleft:8px;border-bottom-left-radius:8px;left:307px;top:127px;right:3px;bottom:23px"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:525.5px;top:36px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:471px;top:39px;right:67px;bottom:135px;line-height:0"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:64px;top:68px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:67px;top:71px;right:471px;bottom:103px;line-height:0"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:184px;top:68px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:187px;top:71px;right:399px;bottom:103px;line-height:0"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:272px;top:68px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:275px;top:71px;right:279px;bottom:103px;line-height:0"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:408px;top:68px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:411px;top:71px;right:175px;bottom:103px;line-height:0"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:472px;top:68px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:475px;top:71px;right:63px;bottom:103px;line-height:0"></div>
<div class=line style="border-width:2px;border-top-width:0;-webkit-border-bottom-right-radius:8px;-moz-border-radius-bottomright:8px;border-bottom-right-radius:8px;-webkit-border-bottom-left-radius:8px;-moz-border-radius-bottomleft:8px;border-bottom-left-radius:8px;left:3px;top:127px;right:307px;bottom:23px"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:413.5px;top:36px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:407px;top:39px;right:179px;bottom:135px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:117.5px;top:36px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:63px;top:39px;right:475px;bottom:135px;line-height:0"></div>
<div style="text-align:center;left:72px;top:16px;right:480px;bottom:144px">method</div>
<div style="text-align:center;left:480px;top:16px;right:72px;bottom:144px">method</div>
<div style="text-align:center;left:208px;top:32px;right:336px;bottom:128px">ADSPRPC</div>
<div style="text-align:center;left:336px;top:32px;right:208px;bottom:128px">ADSPRPC</div>
<div style="text-align:center;left:8px;top:48px;right:544px;bottom:112px">Client</div>
<div style="text-align:center;left:140px;top:48px;right:428px;bottom:112px">Stub</div>
<div style="text-align:center;left:212px;top:48px;right:340px;bottom:112px">Driver</div>
<div style="text-align:center;left:328px;top:48px;right:200px;bottom:112px">Framework</div>
<div style="text-align:center;left:432px;top:48px;right:136px;bottom:112px">Skel</div>
<div style="text-align:center;left:544px;top:48px;right:8px;bottom:112px">Object</div>
<div style="text-align:center;left:60px;top:128px;right:364px;bottom:32px">Applications Processor</div>
<div style="text-align:center;left:400px;top:128px;right:96px;bottom:32px">DSP Processor</div>
</div>
</div>
<p>
The DSP Processor referred in the above picture is the ADSP. However if the chipset has other DSP's you can offload the task to, the user has the option to do so. For a list of available DSP's in each chipset, please refer to the <a href="feature_matrix.html">Feature Matrix</a>
</p><p>
Extending the above picture slightly to include another DSP, say, the CDSP if available...
</p><div class=diagram>
<div class="html2d art" style="width:600px;height:352px;font-size:12.48px;line-height:16px;white-space:nowrap">
<div class="rect round" style="border-width:3px;left:427px;top:7px;right:130px;bottom:246px"></div>
<div class="rect round" style="border-width:3px;left:427px;top:215px;right:130px;bottom:38px"></div>
<div class="rect round" style="border-width:3px;left:539px;top:215px;right:2px;bottom:38px"></div>
<div class="rect round" style="border-width:3px;left:323px;top:7px;right:194px;bottom:246px"></div>
<div class="rect round" style="border-width:3px;left:323px;top:215px;right:194px;bottom:38px"></div>
<div class="rect round" style="border-width:3px;left:131px;top:7px;right:418px;bottom:246px"></div>
<div class="rect round" style="border-width:3px;left:3px;top:7px;right:538px;bottom:246px"></div>
<div class="rect round" style="border-width:3px;left:203px;top:7px;right:330px;bottom:246px"></div>
<div class="rect round" style="border-width:3px;left:539px;top:7px;right:2px;bottom:246px"></div>
<div class=line style="border-bottom-width:2px;border-left-width:2px;-webkit-border-bottom-left-radius:8px;-moz-border-radius-bottomleft:8px;border-bottom-left-radius:8px;left:235px;top:111px;right:351px;bottom:103px"></div>
<div class=line style="border-width:2px;border-top-width:0;-webkit-border-bottom-right-radius:8px;-moz-border-radius-bottomright:8px;border-bottom-right-radius:8px;-webkit-border-bottom-left-radius:8px;-moz-border-radius-bottomleft:8px;border-bottom-left-radius:8px;left:307px;top:319px;right:3px;bottom:7px"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:525.5px;top:244px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:471px;top:247px;right:67px;bottom:103px;line-height:0"></div>
<div class=line style="border-left-width:2px;left:251px;top:255px;right:347px;bottom:79px"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:184px;top:68px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:187px;top:71px;right:399px;bottom:279px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:189.5px;top:36px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:183px;top:39px;right:403px;bottom:311px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:413.5px;top:244px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:407px;top:247px;right:179px;bottom:103px;line-height:0"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:472px;top:68px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:475px;top:71px;right:63px;bottom:279px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:525.5px;top:36px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:471px;top:39px;right:67px;bottom:311px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:247px;top:247px;right:343px;bottom:103px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:239px;top:151px;right:351px;bottom:199px;line-height:0"></div>
<div class=line style="border-bottom-width:2px;border-right-width:2px;-webkit-border-bottom-right-radius:8px;-moz-border-radius-bottomright:8px;border-bottom-right-radius:8px;left:255px;top:127px;right:307px;bottom:199px"></div>
<div class=line style="border-bottom-width:2px;border-left-width:2px;-webkit-border-bottom-left-radius:8px;-moz-border-radius-bottomleft:8px;border-bottom-left-radius:8px;left:3px;top:127px;right:367px;bottom:199px"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:272px;top:68px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:275px;top:71px;right:279px;bottom:279px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:309.5px;top:36px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:271px;top:39px;right:283px;bottom:311px;line-height:0"></div>
<div class=line style="border-width:2px;border-top-width:0;-webkit-border-bottom-right-radius:8px;-moz-border-radius-bottomright:8px;border-bottom-right-radius:8px;-webkit-border-bottom-left-radius:8px;-moz-border-radius-bottomleft:8px;border-bottom-left-radius:8px;left:307px;top:127px;right:3px;bottom:199px"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:472px;top:276px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:475px;top:279px;right:63px;bottom:71px;line-height:0"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:408px;top:276px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:411px;top:279px;right:175px;bottom:71px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:413.5px;top:36px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:407px;top:39px;right:179px;bottom:311px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:247px;top:279px;right:279px;bottom:71px;line-height:0"></div>
<div style="border-left: 4px solid transparent;border-right: 4px solid transparent;border-bottom-width: 10.5px;left:248px;top:112px;line-height:0"></div>
<div class=line style="border-left-width:2px;left:251px;top:115px;right:347px;bottom:111px"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:64px;top:68px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:67px;top:71px;right:471px;bottom:279px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:117.5px;top:36px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:63px;top:39px;right:475px;bottom:311px;line-height:0"></div>
<div style="border-left-width: 10.5px;border-top: 4px solid transparent;border-bottom: 4px solid transparent;left:309.5px;top:244px;line-height:0"></div>
<div class=line style="border-top-width:2px;left:255px;top:247px;right:283px;bottom:103px;line-height:0"></div>
<div style="border-top: 4px solid transparent;border-right-width: 10.5px;border-bottom: 4px solid transparent;left:408px;top:68px;line-height:0"></div>
<div class=dline style="border-top-width:2px;left:411px;top:71px;right:175px;bottom:279px;line-height:0"></div>
<div style="text-align:center;left:72px;top:16px;right:480px;bottom:320px">method</div>
<div style="text-align:center;left:480px;top:16px;right:72px;bottom:320px">method</div>
<div style="text-align:center;left:208px;top:32px;right:336px;bottom:304px">ADSPRPC</div>
<div style="text-align:center;left:336px;top:32px;right:208px;bottom:304px">ADSPRPC</div>
<div style="text-align:center;left:8px;top:48px;right:544px;bottom:288px">Client</div>
<div style="text-align:center;left:140px;top:48px;right:428px;bottom:288px">Stub</div>
<div style="text-align:center;left:212px;top:48px;right:340px;bottom:288px">Driver</div>
<div style="text-align:center;left:328px;top:48px;right:200px;bottom:288px">Framework</div>
<div style="text-align:center;left:432px;top:48px;right:136px;bottom:288px">Skel</div>
<div style="text-align:center;left:544px;top:48px;right:8px;bottom:288px">Object</div>
<div style="text-align:right;left:-128px;top:128px;right:376px;bottom:208px">Applications Processor</div>
<div style="text-align:center;left:396px;top:128px;right:92px;bottom:208px">ADSP Processor</div>
<div style="text-align:center;left:480px;top:224px;right:72px;bottom:112px">method</div>
<div style="text-align:center;left:336px;top:240px;right:208px;bottom:96px">CDSPRPC</div>
<div style="text-align:center;left:328px;top:256px;right:200px;bottom:80px">Framework</div>
<div style="text-align:center;left:432px;top:256px;right:136px;bottom:80px">Skel</div>
<div style="text-align:center;left:544px;top:256px;right:8px;bottom:80px">Object</div>
<div style="text-align:center;left:396px;top:320px;right:92px;bottom:16px">CDSP Processor</div>
</div>
</div>
<p>
As illustrated above, the ADSPRPC driver residing in the application processor will offload the task to ADSP or CDSP depending on which libXdsprpc.so is linked to the stub library. First you need to define the respective interface functions defined in the idl file. Refer to the &#8220;calculator_multi_legacy.idl&#8221; in the &#8220;inc&#8221; folder. Note how the interface class &#8220;calculator&#8221; is inherited for the DSP specific interface with interface name &#8220;calculator&#8221; prefixed with the respective DSP name, i.e. &#8220;adsp_calculator&#8221;, &#8220;cdsp_calculator&#8221;,etc. As a result IDL compiler will now generate the stub and skel files for each of these interfaces separately. Now, refer to the android.min file in the example and study how the &#8220;libadspcalculator&#8221; and &#8220;libcdspcalculator&#8221; are getting linked to libadsprpc.so and libcdsprpc.so respectively. The respective stub library is then linked to the final exe &#8220;calculator_multi_legacy&#8221;.
</p><h2>
<a name="Calculator_multi_domains"></a>Calculator_multi_domains
</h2><p>
In this example the application's interface is inherited from &#8220;remote_handle64&#8221;. This will allow the application to use the Open/Close functions of this interface to open remote sessions to the DSP the user can choose at run-time. The Open function takes a uri parameter as input where the user can specify the target DSP domain he wants the remote session to be connected to. For details on the exact values to be provided to this interface you can refer to the the function &#8220;calculator_test()&#8221; in file &#8220;calculator_test.c&#8221;. The Open function returns a handle to the remote session created which can then be used to call into ther other interface functions defined in the IDL.
</p><p>
Internally the RPC driver running in the apps processor will know which domain to execute the skel function in based on the remote handle. If the earlier Open function call fails, the user has the option to open the session to a different DSP domain. Please refer to section 4.2.2 of the <a href="images/80-VB419-108_Hexagon_DSP_User_Guide.pdf">Programmer's guide for Hexagon</a> for our recommendations for the domain usage.
</p><p>
The calculator_multi_domains example illustrates this by taking the domain value as a run-time input. Based on this value, the example opens a remote session with the respective DSP and offloads the functions &#8220;sum&#8221; and &#8220;max&#8221;.
</p><h2>
<a name="Building%20and%20Testing"></a>Building and Testing
</h2><p>
Both the examples have walkthrough script that helps the user build and execute the example on the target. The walkthrough script follows the same general structure explained in <a href="calculator_android.html">calculator_walkthrough</a>.
</p><p align="center" style="display:block;padding-top: 50px;">
  Copyright &#169; 2018 Qualcomm Technologies Inc. All rights reserved.

</p><a style="display:block;padding-bottom: 700px;"></a></div></div>
</body>
</html>
